--CHAPTER07
--DB OBJECT

--1.1. CHAR 
--1.1.1. 특성
--타입 : 문자열
--최대길이 : 2000 BYTE
--설명 : 고정 길이기 때문에 홍길동을 입력하면 홍길동 뒤에 94 BYTE만큼 SPACE가 채워진다.
--[PAGE265][CHAR의 길이를 체크]
SELECT DT_CHAR, RTRIM(DT_CHAR) FROM DATA_TYPE
UNION ALL
SELECT TO_CHAR(LENGTHB(DT_CHAR)), TO_CHAR(LENGTHB(RTRIM(DT_CHAR))) FROM DATA_TYPE;


--1.2. VARCHAR 
--1.2.1. 특성
--타입 : 문자열
--최대길이 : 4000 BYTE
--설명 : 가변 길이기 때문에 홍길동을 입력하면 홍길동만 입력되어 6 BYTE만 차지하게된다.
--[PAGE266][VARCHAR2의 길이를 체크]
SELECT DT_VARCHAR2, TRIM(DT_VARCHAR2) FROM DATA_TYPE
UNION ALL
SELECT TO_CHAR(LENGTHB(DT_VARCHAR2)), TO_CHAR(LENGTHB(TRIM(DT_VARCHAR2))) FROM DATA_TYPE;

--[PAGE267][같은 타입(CHAR)의 조인]
SELECT T1.DT_SEQ
       ,T1.DT_CHAR
       ,T1.DT_VARCHAR2
       ,T1.DT_NUMBER_1
       ,T1.DT_NUMBER_2
       ,T1.DT_DATE
FROM DATA_TYPE T1
     ,DATA_TYPE T2
WHERE T1.DT_SEQ = T2.DT_SEQ
AND T1.DT_CHAR = T2.DT_CHAR;

--[PAGE268][다른 타입(CHAR)의 조인]
SELECT T1.DT_SEQ
       ,T1.DT_CHAR
       ,T1.DT_VARCHAR2
       ,T1.DT_NUMBER_1
       ,T1.DT_NUMBER_2
       ,T1.DT_DATE
FROM DATA_TYPE T1
     ,DATA_TYPE T2
WHERE T1.DT_SEQ = T2.DT_SEQ
AND T1.DT_CHAR = T2.DT_VARCHAR2;

--1.3. NUMBER
--1.3.1. 특성
--타입 : 숫자
--최대길이 : 10^-38 ~ 10^38 /  21 BYTE
--설명 : NUMBER(정밀도, 배율)
--정밀도 : 소수점 좌,우의 숫자의 길이를 포함한 전체 자리수
--배율 : 소수점 이하의 자리수

--[PAGE270][NUMBER의 길이 체크]
UPDATE DATA_TYPE 
SET DT_NUMBER_1 = 123456789012345678901234567890.12345678901234567890123456789
    ,DT_NUMBER_2 =1234567.99
WHERE DT_SEQ = '01';

UPDATE DATA_TYPE 
SET DT_NUMBER_1 = -123456789012345678901234567890.12345678901234567890123456789
    ,DT_NUMBER_2 = -1234567.99
WHERE DT_SEQ = '02';

SELECT DT_SEQ
       ,DT_CHAR
       ,DT_VARCHAR2
       ,DT_NUMBER_1
       ,VSIZE(DT_NUMBER_1)||' BYTE' AS "크기"
       ,DT_NUMBER_2
FROM DATA_TYPE;

--1.4. DATE
--1.4.1. 특성
--타입 : 날짜
--최대길이 : BC 4712년 1월 1일 ~ 9999년 12월 32일 / 7 BYTE
--설명 : DATE형은 숫자로 구성되어 있기 때문에 SYSDATE -7같은 연산이 가능하다. 그러나 DATE -DATE는 사용할 수 없다.

--[PAGE271][DATE 타입 조회]
SELECT VSIZE(DT_DATE)||' BYTE' AS "크기"
       ,TO_CHAR(DT_DATE,'YYYY/MM/DD') AS "년월일"
       ,TO_CHAR(DT_DATE,'YYYY/MM/DD HH24:MI:SS') AS "년월일시분초"
       ,DT_DATE
       ,SYSDATE - 7
FROM DATA_TYPE;

--1.4.2. LAST_DAY(DATE) 함수
--[PAGE272][LAST_DAY 함수 사용] 해당 월의 마지막 일자를 리턴한다.
SELECT LAST_DAY(SYSDATE)
FROM DUAL;

--1.4.3. TO_CHAR(DATE,['FORMAT']) 함수 FORMAT에 맞게 문자열 형식으로 리턴한다.
SELECT TO_CHAR(SYSDATE,'YYYY/MM/DD HH24:MI:SS')
FROM DUAL;

--1.4.4. TO_DATE(CHAR,['FORMAT']) 함수 FORMAT에 맞게 DATE 형식으로 리턴한다.
SELECT TO_DATE('20100503 09:59:25','YYYYMMDD HH24:MI:SS')
FROM DUAL;